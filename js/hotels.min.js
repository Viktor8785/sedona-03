const link=document.querySelector(".navigation-item-info"),close=document.querySelector(".modal-close"),popup=document.querySelector(".modal-adv"),pageContainer=document.querySelector(".page-container"),filterFormPrice=document.querySelector(".filter-form-price"),sliderContainer=document.querySelector(".slider-container"),slider=document.querySelector(".slider"),sliderBarLeft=document.querySelector(".slider-bar-left"),sliderBarRight=document.querySelector(".slider-bar-right"),sliderThumbLeft=document.querySelector(".slider-thumb-left"),sliderThumbRight=document.querySelector(".slider-thumb-right"),priceInputFrom=document.querySelector(".price-input-from"),priceInputTo=document.querySelector(".price-input-to"),minPrice=0,maxPrice=4e3,priceRatio=maxPrice/(slider.offsetWidth-sliderThumbLeft.offsetWidth);let isDraggingLeft=!1,isDraggingRight=!1,xPosLeft=0,xPosRight=slider.offsetWidth-sliderThumbRight.offsetWidth,maxXPosLeft=0,maxXPosRight=0;function keyDown(e){if("Escape"===e.key&&popup.classList.contains("modal-adv-show")){e.preventDefault(),popup.classList.remove("modal-adv-show");const t=document.activeElement;t.blur()}}function sliderThumbLeftDragg(){maxXPosLeft=slider.offsetWidth-sliderThumbLeft.offsetWidth,xPosLeft<0&&(xPosLeft=0),xPosLeft>maxXPosLeft&&(xPosLeft=maxXPosLeft),xPosLeft>xPosRight-sliderThumbRight.offsetWidth&&(xPosLeft=xPosRight-sliderThumbRight.offsetWidth),sliderThumbLeft.style.left=String(xPosLeft)+"px",sliderBarLeft.style.width=String(xPosLeft+sliderThumbLeft.offsetWidth/2)+"px"}function sliderThumbRightDragg(){maxXPosRight=slider.offsetWidth-sliderThumbRight.offsetWidth,xPosRight<0&&(xPosRight=0),xPosRight<xPosLeft+sliderThumbLeft.offsetWidth&&(xPosRight=xPosLeft+sliderThumbLeft.offsetWidth),xPosRight>maxXPosRight&&(xPosRight=maxXPosRight),sliderThumbRight.style.left=String(xPosRight)+"px",sliderBarRight.style.width=String(slider.offsetWidth-xPosRight-sliderThumbRight.offsetWidth/2)+"px"}link.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-adv-show")}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-adv-show")}),window.addEventListener("keydown",e=>{keyDown(e)}),priceInputFrom.addEventListener("input",e=>{let t=Number(priceInputFrom.value);(Number.isNaN(t)||t<0)&&(t=0,priceInputFrom.value=t),t>maxPrice&&(t=maxPrice,priceInputFrom.value=t),xPosLeft=t/priceRatio,sliderThumbLeftDragg()}),priceInputTo.addEventListener("input",e=>{let t=Number(priceInputTo.value);(Number.isNaN(t)||t>maxPrice)&&(t=maxPrice,priceInputTo.value=t),t<0&&(t=0,priceInputTo.value=t),xPosRight=t/priceRatio,sliderThumbRightDragg()}),sliderThumbLeft.addEventListener("mousedown",e=>{e.preventDefault(),isDraggingLeft=!0}),sliderThumbLeft.addEventListener("touchstart",e=>{isDraggingLeft=!0}),sliderThumbRight.addEventListener("mousedown",e=>{e.preventDefault(),isDraggingRight=!0}),sliderThumbRight.addEventListener("touchstart",e=>{isDraggingRight=!0}),sliderContainer.addEventListener("mousemove",e=>{isDraggingLeft&&(xPosLeft=e.pageX-sliderContainer.offsetLeft-pageContainer.offsetLeft,sliderThumbLeftDragg(),priceInputFrom.value=Math.round(xPosLeft*priceRatio)),isDraggingRight&&(xPosRight=e.pageX-sliderContainer.offsetLeft-pageContainer.offsetLeft,sliderThumbRightDragg(),priceInputTo.value=Math.round(xPosRight*priceRatio))}),sliderContainer.addEventListener("touchmove",e=>{isDraggingLeft&&(xPosLeft=e.pageX-sliderContainer.offsetLeft-pageContainer.offsetLeft,sliderThumbLeftDragg(),priceInputFrom.value=Math.round(xPosLeft*priceRatio)),isDraggingRight&&(xPosRight=e.pageX-sliderContainer.offsetLeft-pageContainer.offsetLeft,sliderThumbRightDragg(),priceInputTo.value=Math.round(xPosRight*priceRatio))}),document.addEventListener("mouseup",e=>{e.preventDefault(),isDraggingLeft=!1,isDraggingRight=!1}),document.addEventListener("touchend",e=>{isDraggingLeft=!1,isDraggingRight=!1});
